---
title: 对极约束
categories:
  - []
tags:
  - null
date: 2020-07-05 16:01:19
---

<!--more-->
对极约束，建立了同名像点之间的几何关系，对于三维重建来说，是一个绕不开的重要话题。

本文将对对极约束、基本矩阵、本质矩阵等内容进行介绍。

## 1 对极约束
### 1.1 对极几何

{% asset_img 1.png %}

其中：
- $I_1$ 、$I_2$ 为两张影像；
- $O_1$ 、$O_2$ 分别为 $I_1$ 、$I_2$ 的投影中心；
- $e_1$ 、$e_2$ 为 $O_1$ 、$O_2$ 连线分别与 $I_1$ 、$I_2$ 的交点；
- $P$ 为一三维空间点；
- $p_1$ 、$p_2$ 分别为 $P$ 在 $I_1$ 、$I_2$ 上的投影；
- $l_1$ 、$l_2$ 分别为 $p_1$ 、$e_1$ 连线 和 $p_2$ 、$e_2$ 连线；

一些概念：
- 直线 $O_1O_2$ 称为基线（Baseline）；
- $p_1$ 、$p_2$ 称为一对同名像点；
- 平面 $PO_1O_2$ 称为极平面（Epipolar Plane）；
- $e_1$ 、 $e_2$ 称为极点（Epipole）；
- $l_1$ 、$l_2$ 称为极线（Epipolar Line）;

### 1.2 对极约束
影像 $I_1$ 的内参矩阵为 $K_1$, 外参矩阵为 **$[I | 0]$**； 影像 $I_2$ 的内参矩阵为 $K_2$, 外参矩阵为 $[R | t]$。

根据针孔相机模型，有：
$$p_1 = K_1P \\ p_2 = K_2(RP + t)$$

设（其实，$x_1$、$x_2$ 分别为 $p_1$、$p_2$ 的归一化坐标）：
$$x_1 = K_1^{-1}p_1 \\ x_2 = K_2^{-1}p_2$$

有：
$$x_2 = Rx_1 + t$$

两侧同时左乘（叉积） $t$（等效于左乘 $t$ 的反对陈矩阵 $t_\times$）：
$$t_\times x_2 = t_\times Rx_1$$

两侧同时左乘（点积） $x_2^T$, 得：
$$x_2^Tt_\times Rx_1 = 0$$

整理，得：
$$x_2^TEx_1 = 0,E = t_\times R$$

其中， $E$称为本质矩阵（Essential Matrix）

重新代入 $p_1$、$p_2$, 得：
$$p_2^TK_2^{-T}t_\times RK_1^{-1}p_1 = 0$$

整理，得：
$$p_2^TFp_1 = 0, F = K_2^{-T}t_\times RK_1^{-1}$$

其中，$F$ 称为基本矩阵（Fundamental Matrix）。基础矩阵和本质矩阵之间具有如下关系：
$$E = K_2^TFK_1$$

## 2 本质矩阵
### 2.1 本质矩阵性质
本质矩阵的自由度为5，其有一个非常重要的性质：一个 $3 \times 3$ 矩阵是本质矩阵的充要条件是它的奇异值中有两个相等而第三个是0。

证明：

设：$E = t_\times R = SR$，我们将利用下列矩阵证明上述结论：
$$
W
=
\begin{bmatrix}
0 & -1 & 0 \\
1 & 0 & 0 \\
0 & 0 & 1
\end{bmatrix}
,
Z
=
\begin{bmatrix}
0 & 1 & 0 \\
-1 & 0 & 0 \\
0 & 0 & 0
\end{bmatrix}
$$
显然，$W$ 为正交矩阵， $Z$ 为反对称矩阵。

根据定理:

“如果S是实反对称矩阵，那么 $S = UBU^T$, 其中 $U$ 为正交矩阵， $B$ 为形如 $diag(a_1Z, a_2Z,...,a_mZ,0,...,0)^T$ 的分块对角矩阵， $Z = \begin{bmatrix}0 & 1 \\ -1 & 0\end{bmatrix}$”

利用上述定理对反对陈矩阵 $S$ 进行分解(相差一个符号意义下)，有：
$$S = kUZU^T$$

同时，在相差一个符号的意义下，有：
$$Z = diag(1, 1, 0)W$$

故，在相差一个常数意义下，有：
$$S = Udiag(1, 1, 0)WU^T$$

因此：
$$E = SR = Udiag(1, 1, 0)(WU^TR)$$

显然，上式正是 $E$ 的奇异值分解，证毕。

反之，一个具有两个相同奇异值（另一个为0）的矩阵可以先进行SVD分解，然后整理成反对称矩阵和正交矩阵乘积的形式。


### 2.2 由本质矩阵恢复摄影矩阵



## 3 基本矩阵

## 参考
高翔 - 视觉SLAM十四讲

R & H - 计算机视觉中的多视几何
